{"ast":null,"code":"import _regeneratorRuntime from \"D:\\\\iCinema-master\\\\iCinema-master\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"D:\\\\iCinema-master\\\\iCinema-master\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"D:\\\\iCinema-master\\\\iCinema-master\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"D:\\\\iCinema-master\\\\iCinema-master\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"D:\\\\iCinema-master\\\\iCinema-master\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\iCinema-master\\\\iCinema-master\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"D:\\\\iCinema-master\\\\iCinema-master\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"D:\\\\iCinema-master\\\\iCinema-master\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"D:\\\\iCinema-master\\\\iCinema-master\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"D:\\\\iCinema-master\\\\iCinema-master\\\\frontend\\\\src\\\\pages\\\\AddMovie\\\\index.js\";\nimport React from 'react';\nimport Joi from '@hapi/joi';\nimport { connect } from 'react-redux';\nimport Input from '../../components/common/Input';\nimport Button from '../../components/common/Button';\nimport Select from '../../components/common/Select';\nimport { addMovie as _addMovie } from '../../actions/moviesAction';\n\nvar AddMovieForm = /*#__PURE__*/function (_React$Component) {\n  _inherits(AddMovieForm, _React$Component);\n\n  function AddMovieForm() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, AddMovieForm);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(AddMovieForm)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      data: {\n        title: \"\",\n        genre: \"\",\n        numberInStock: \"\",\n        description: \"\",\n        image: null,\n        rate: \"\",\n        trailerLink: \"\",\n        movieLength: \"\"\n      },\n      genres: [],\n      errors: {}\n    };\n    _this.schema = {\n      id: Joi.string(),\n      title: Joi.string().required().label(\"Title\"),\n      genre: Joi.string().required().label(\"Genre\"),\n      numberInStock: Joi.number().min(0).required().label(\"Number In Stocks\"),\n      description: Joi.string().required().label(\"Description\"),\n      image: Joi.object().allow(null).label(\"Cover Image\"),\n      rate: Joi.string().required().label(\"Rate\"),\n      trailerLink: Joi.string().required().label(\"Trailer Link\"),\n      movieLength: Joi.string().required().label(\"Movie Length\")\n    };\n\n    _this.handleChange = function (_ref) {\n      var input = _ref.currentTarget;\n\n      var errors = _objectSpread({}, _this.state.errors);\n\n      var errorMessage = _this.validateProperty(input);\n\n      if (errorMessage) errors[input.name] = errorMessage;else delete errors[input.name];\n\n      var data = _objectSpread({}, _this.state.data);\n\n      data[input.name] = input.value;\n\n      _this.setState({\n        data: data,\n        errors: errors\n      });\n    };\n\n    _this.validateProperty = function (input) {\n      var name = input.name,\n          value = input.value;\n\n      var obj = _defineProperty({}, name, value);\n\n      var schema = _defineProperty({}, name, _this.schema[name]);\n\n      var _Joi$validate = Joi.validate(obj, schema),\n          error = _Joi$validate.error;\n\n      return error ? error.details[0].message : null;\n    };\n\n    _this.handleIncludeMovie = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var _this$state, title, genre, numberInStock, description, image, rate, trailerLink, movieLength, payload;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _this$state = _this.state, title = _this$state.title, genre = _this$state.genre, numberInStock = _this$state.numberInStock, description = _this$state.description, image = _this$state.image, rate = _this$state.rate, trailerLink = _this$state.trailerLink, movieLength = _this$state.movieLength;\n              payload = {\n                title: title,\n                genre: genre,\n                numberInStock: numberInStock,\n                description: description,\n                image: image,\n                rate: rate,\n                trailerLink: trailerLink,\n                movieLength: movieLength\n              };\n              _context.next = 4;\n              return api.insertMovie(payload).then(function (res) {\n                window.alert(\"Movie inserted successfully\");\n\n                _this.setState({\n                  title: \"\",\n                  genre: \"\",\n                  numberInStock: \"\",\n                  description: \"\",\n                  image: null,\n                  rate: \"\",\n                  trailerLink: \"\",\n                  movieLength: \"\"\n                });\n              });\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    _this.uploadImage = function (e) {\n      if (e.target.files[0]) {\n        var data = _objectSpread({}, _this.state.data);\n\n        data[\"image\"] = e.target.files[0];\n\n        _this.setState({\n          data: data\n        });\n      }\n    };\n\n    return _this;\n  }\n\n  _createClass(AddMovieForm, [{\n    key: \"render\",\n    value: function render() {\n      var _this$state2 = this.state,\n          errors = _this$state2.errors,\n          data = _this$state2.data;\n      var title = data.title,\n          genre = data.genre,\n          numberInStock = data.numberInStock,\n          description = data.description,\n          image = data.image,\n          rate = data.rate,\n          trailerLink = data.trailerLink,\n          movieLength = data.movieLength;\n      var genres = this.props.genres;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"background-container pt-5\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"container\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"h1\", {\n        className: \"header\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 11\n        }\n      }, \"Add a new movie\"), /*#__PURE__*/React.createElement(\"form\", {\n        encType: \"multipart/form-data\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Input, {\n        name: \"title\",\n        value: title,\n        label: \"Title\",\n        onChange: this.handleChange,\n        placeholder: \"Enter the title...\",\n        error: errors[\"title\"],\n        iconClass: \"fas fa-film\",\n        autoFocus: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(Input, {\n        name: \"genre\",\n        label: \"Genre\",\n        onChange: this.handleChange,\n        value: genre,\n        error: errors[\"genre\"],\n        options: genres,\n        iconClass: \"fas fa-address-card\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(Input, {\n        name: \"numberInStock\",\n        label: \"Number In Stock\",\n        onChange: this.handleChange,\n        placeholder: \"Enter numbers the stock...\",\n        error: errors[\"numberInStock\"],\n        iconClass: \"fas fa-hashtag\",\n        value: numberInStock,\n        type: \"number\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(Input, {\n        name: \"image\",\n        label: \"Cover Image\",\n        onChange: this.uploadImage,\n        error: errors[\"coverImage\"],\n        iconClass: \"fas fa-file-image\",\n        accept: \"image/*\",\n        type: \"file\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(Input, {\n        name: \"rate\",\n        label: \"Rate\",\n        placeholder: \"Enter rate about this movie...\",\n        iconClass: \"fas fa-info\",\n        type: \"textarea\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(Input, {\n        name: \"trailerLink\",\n        label: \"Trailer Link\",\n        placeholder: \"Enter link about this movie...\",\n        iconClass: \"fas fa-info\",\n        type: \"textarea\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(Input, {\n        name: \"movieLength\",\n        label: \"Movie Length\",\n        placeholder: \"Enter length about this movie...\",\n        iconClass: \"fas fa-info\",\n        type: \"textarea\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(Input, {\n        name: \"description\",\n        label: \"Description\",\n        placeholder: \"Enter description about this movie...\",\n        iconClass: \"fas fa-info\",\n        error: errors[\"description\"],\n        type: \"textarea\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(Button, {\n        onClick: this.handleIncludeMovie,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 13\n        }\n      }, \"Add Movie\"))));\n    }\n  }]);\n\n  return AddMovieForm;\n}(React.Component);\n\nvar mapDispatchToProps = function mapDispatchToProps(dipatch) {\n  return {\n    addMovie: function addMovie(movie) {\n      return dipatch(_addMovie(movie));\n    }\n  };\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    genres: state.genre.genres\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AddMovieForm);","map":{"version":3,"sources":["D:/iCinema-master/iCinema-master/frontend/src/pages/AddMovie/index.js"],"names":["React","Joi","connect","Input","Button","Select","addMovie","AddMovieForm","state","data","title","genre","numberInStock","description","image","rate","trailerLink","movieLength","genres","errors","schema","id","string","required","label","number","min","object","allow","handleChange","input","currentTarget","errorMessage","validateProperty","name","value","setState","obj","validate","error","details","message","handleIncludeMovie","payload","api","insertMovie","then","res","window","alert","uploadImage","e","target","files","props","Component","mapDispatchToProps","dipatch","movie","mapStateToProps"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Joi from '@hapi/joi';\nimport { connect } from 'react-redux';\n\nimport Input from '../../components/common/Input';\nimport Button from '../../components/common/Button';\nimport Select from '../../components/common/Select';\nimport { addMovie } from '../../actions/moviesAction';\n\nclass AddMovieForm extends React.Component {\n  state = {\n    data: {\n      title:\"\",\n      genre:\"\",\n      numberInStock:\"\",\n      description:\"\",\n      image: null,\n      rate: \"\",\n      trailerLink: \"\",\n      movieLength: \"\"\n    },\n    genres: [],\n    errors: {}\n  }\n\n  schema = {\n    id: Joi.string(),\n    title: Joi.string().required().label(\"Title\"),\n    genre: Joi.string().required().label(\"Genre\"),\n    numberInStock: Joi.number().min(0).required().label(\"Number In Stocks\"),\n    description: Joi.string().required().label(\"Description\"),\n    image: Joi.object().allow(null).label(\"Cover Image\"),\n    rate: Joi.string().required().label(\"Rate\"),\n    trailerLink: Joi.string().required().label(\"Trailer Link\"),\n    movieLength: Joi.string().required().label(\"Movie Length\"),\n  }\n\n  handleChange = ({ currentTarget: input }) => {\n    const errors = { ...this.state.errors };\n    const errorMessage = this.validateProperty(input);\n\n    if (errorMessage) errors[input.name] = errorMessage;\n    else delete errors[input.name];\n\n    const data = { ...this.state.data };\n    data[input.name] = input.value;\n    this.setState({ data, errors });\n  };\n\n  validateProperty = input => {\n    const { name, value } = input;\n    const obj = { [name]: value };\n    const schema = { [name]: this.schema[name] };\n    const { error } = Joi.validate(obj, schema);\n    return error ? error.details[0].message : null;\n  };\n\n  handleIncludeMovie = async () => {\n    const { title, genre, numberInStock, description,image, rate, trailerLink,  movieLength } = this.state\n    \n    const payload = { title, genre, numberInStock, description,image, rate, trailerLink,  movieLength }\n\n    await api.insertMovie(payload).then(res => {\n        window.alert(`Movie inserted successfully`)\n        this.setState({\n          title:\"\",\n          genre:\"\",\n          numberInStock:\"\",\n          description:\"\",\n          image: null,\n          rate: \"\",\n          trailerLink: \"\",\n          movieLength: \"\"\n        })\n    })\n}\n  \n  uploadImage = e => {\n    if(e.target.files[0]) {    \n      const data = {...this.state.data}\n      data[\"image\"] = e.target.files[0];\n      this.setState({ data });\n    }\n  }\n\n  render() {\n    const { errors, data } = this.state;\n    const {title, genre, numberInStock, description,image, rate, trailerLink,  movieLength  } = data;\n    const { genres } = this.props;\n    return ( \n      <div className=\"background-container pt-5\">\n        <div className=\"container\">\n          <h1 className=\"header\">Add a new movie</h1>\n          <form  encType=\"multipart/form-data\" >\n            <Input \n              name=\"title\"\n              value={title}\n              label=\"Title\"\n              onChange={this.handleChange}\n              placeholder=\"Enter the title...\"\n              error={errors[\"title\"]}\n              iconClass=\"fas fa-film\"\n              autoFocus\n            />\n            <Input\n              name=\"genre\"\n              label=\"Genre\"\n              onChange={this.handleChange}\n              value={genre}\n              error={errors[\"genre\"]}\n              options={genres}\n              iconClass='fas fa-address-card'\n            />\n            <Input  \n              name=\"numberInStock\" \n              label=\"Number In Stock\" \n              onChange={this.handleChange} \n              placeholder=\"Enter numbers the stock...\" \n              error={errors[\"numberInStock\"]} \n              iconClass=\"fas fa-hashtag\" \n              value={numberInStock} \n              type=\"number\"\n            />\n            <Input \n              name=\"image\"\n              label=\"Cover Image\"\n              onChange={this.uploadImage}\n              error={errors[\"coverImage\"]}\n              iconClass=\"fas fa-file-image\"\n              accept=\"image/*\"\n              type=\"file\"\n            />\n            <Input\n              name=\"rate\"\n              label=\"Rate\"\n              placeholder=\"Enter rate about this movie...\"\n              iconClass=\"fas fa-info\"\n              type=\"textarea\"\n            />\n            \n            <Input\n              name=\"trailerLink\"\n              label=\"Trailer Link\"\n              placeholder=\"Enter link about this movie...\"\n              iconClass=\"fas fa-info\"\n              type=\"textarea\"\n            />\n            \n            <Input\n              name=\"movieLength\"\n              label=\"Movie Length\"\n              placeholder=\"Enter length about this movie...\"\n              iconClass=\"fas fa-info\"\n              type=\"textarea\"\n            />\n            \n            <Input\n              name=\"description\"\n              label=\"Description\"\n              placeholder=\"Enter description about this movie...\"\n              iconClass=\"fas fa-info\"\n              error={errors[\"description\"]}\n              type=\"textarea\"\n            />\n            <Button onClick={this.handleIncludeMovie}>Add Movie</Button>\n          </form>\n        </div>\n      </div>\n    );\n  }\n}\nconst mapDispatchToProps = dipatch => {\n  return {\n    addMovie: (movie) => dipatch(addMovie(movie)),\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    genres: state.genre.genres\n  }\n}\nexport default connect(mapStateToProps, mapDispatchToProps) (AddMovieForm);"]},"metadata":{},"sourceType":"module"}