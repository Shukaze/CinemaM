{"ast":null,"code":"import _regeneratorRuntime from \"D:\\\\Margo\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"D:\\\\Margo\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nvar _jsxFileName = \"D:\\\\Margo\\\\frontend\\\\src\\\\hoc\\\\auth.js\";\nimport React, { useEffect } from 'react';\nimport { auth } from '../_actions/user_actions';\nimport { useSelector, useDispatch } from \"react-redux\";\nexport default function (ComposedClass, reload) {\n  var adminRoute = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n\n  function AuthenticationCheck(props) {\n    var user = useSelector(function (state) {\n      return state.user;\n    });\n    var dispatch = useDispatch();\n    useEffect(function () {\n      dispatch(auth()).then( /*#__PURE__*/function () {\n        var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(response) {\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  _context.next = 2;\n                  return !response.payload.isAuth;\n\n                case 2:\n                  if (!_context.sent) {\n                    _context.next = 6;\n                    break;\n                  }\n\n                  if (reload) {\n                    props.history.push('/register_login');\n                  }\n\n                  _context.next = 7;\n                  break;\n\n                case 6:\n                  if (adminRoute && !response.payload.isAdmin) {\n                    props.history.push('/');\n                  } else {\n                    if (reload === false) {\n                      props.history.push('/');\n                    }\n                  }\n\n                case 7:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee);\n        }));\n\n        return function (_x) {\n          return _ref.apply(this, arguments);\n        };\n      }());\n    }, [dispatch, props.history, user.googleAuth]);\n    return /*#__PURE__*/React.createElement(ComposedClass, Object.assign({}, props, {\n      user: user,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 33,\n        columnNumber: 13\n      }\n    }));\n  }\n\n  return AuthenticationCheck;\n}","map":{"version":3,"sources":["D:/Margo/frontend/src/hoc/auth.js"],"names":["React","useEffect","auth","useSelector","useDispatch","ComposedClass","reload","adminRoute","AuthenticationCheck","props","user","state","dispatch","then","response","payload","isAuth","history","push","isAdmin","googleAuth"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,IAAT,QAAqB,0BAArB;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AAEA,eAAe,UAAUC,aAAV,EAAyBC,MAAzB,EAAoD;AAAA,MAAnBC,UAAmB,uEAAN,IAAM;;AAC/D,WAASC,mBAAT,CAA6BC,KAA7B,EAAoC;AAEhC,QAAIC,IAAI,GAAGP,WAAW,CAAC,UAAAQ,KAAK;AAAA,aAAIA,KAAK,CAACD,IAAV;AAAA,KAAN,CAAtB;AACA,QAAME,QAAQ,GAAGR,WAAW,EAA5B;AAEAH,IAAAA,SAAS,CAAC,YAAM;AAEZW,MAAAA,QAAQ,CAACV,IAAI,EAAL,CAAR,CAAiBW,IAAjB;AAAA,4EAAsB,iBAAMC,QAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBACR,CAACA,QAAQ,CAACC,OAAT,CAAiBC,MADV;;AAAA;AAAA;AAAA;AAAA;AAAA;;AAEd,sBAAIV,MAAJ,EAAY;AACRG,oBAAAA,KAAK,CAACQ,OAAN,CAAcC,IAAd,CAAmB,iBAAnB;AACH;;AAJa;AAAA;;AAAA;AAMd,sBAAIX,UAAU,IAAI,CAACO,QAAQ,CAACC,OAAT,CAAiBI,OAApC,EAA6C;AACzCV,oBAAAA,KAAK,CAACQ,OAAN,CAAcC,IAAd,CAAmB,GAAnB;AACH,mBAFD,MAGK;AACD,wBAAIZ,MAAM,KAAK,KAAf,EAAsB;AAClBG,sBAAAA,KAAK,CAACQ,OAAN,CAAcC,IAAd,CAAmB,GAAnB;AACH;AACJ;;AAba;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAtB;;AAAA;AAAA;AAAA;AAAA;AAiBH,KAnBQ,EAmBN,CAACN,QAAD,EAAWH,KAAK,CAACQ,OAAjB,EAA0BP,IAAI,CAACU,UAA/B,CAnBM,CAAT;AAqBA,wBACI,oBAAC,aAAD,oBAAmBX,KAAnB;AAA0B,MAAA,IAAI,EAAEC,IAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OADJ;AAGH;;AACD,SAAOF,mBAAP;AACH","sourcesContent":["import React, { useEffect } from 'react';\nimport { auth } from '../_actions/user_actions';\nimport { useSelector, useDispatch } from \"react-redux\";\n\nexport default function (ComposedClass, reload, adminRoute = null) {\n    function AuthenticationCheck(props) {\n\n        let user = useSelector(state => state.user);\n        const dispatch = useDispatch();\n\n        useEffect(() => {\n\n            dispatch(auth()).then(async response => {\n                if (await !response.payload.isAuth) {\n                    if (reload) {\n                        props.history.push('/register_login')\n                    }\n                } else {\n                    if (adminRoute && !response.payload.isAdmin) {\n                        props.history.push('/')\n                    }\n                    else {\n                        if (reload === false) {\n                            props.history.push('/')\n                        }\n                    }\n                }\n            })\n            \n        }, [dispatch, props.history, user.googleAuth])\n\n        return (\n            <ComposedClass {...props} user={user} />\n        )\n    }\n    return AuthenticationCheck\n}\n\n\n"]},"metadata":{},"sourceType":"module"}